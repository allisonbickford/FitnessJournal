<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ReadOnlyExerciseCardContent.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">app</a> &gt; <a href="index.source.html" class="el_package">com.catscoffeeandkitchen.fitnessjournal.ui.workouts.details.exercise</a> &gt; <span class="el_source">ReadOnlyExerciseCardContent.kt</span></div><h1>ReadOnlyExerciseCardContent.kt</h1><pre class="source lang-java linenums">package com.catscoffeeandkitchen.fitnessjournal.ui.workouts.details.exercise

import androidx.compose.foundation.BorderStroke
import androidx.compose.foundation.layout.*
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.MoreVert
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.getValue
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import com.catscoffeeandkitchen.domain.models.*
import com.catscoffeeandkitchen.fitnessjournal.TestTags
import com.catscoffeeandkitchen.fitnessjournal.ui.components.FitnessJournalCard
import com.catscoffeeandkitchen.fitnessjournal.ui.util.PreviewConstants.bicepCurlSets
import com.catscoffeeandkitchen.fitnessjournal.ui.util.PreviewConstants.exerciseBicepCurl
import com.catscoffeeandkitchen.fitnessjournal.ui.util.PreviewConstants.expectedSetBicepCurl
import com.catscoffeeandkitchen.fitnessjournal.ui.util.WeightUnit
import com.catscoffeeandkitchen.fitnessjournal.ui.util.toCleanString


@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ColumnScope.readOnlyExerciseCardContent(
    uiData: ExerciseUiData,
<span class="nc" id="L32">    modifier: Modifier = Modifier.testTag(TestTags.ReadOnlyExercise)</span>
<span class="nc bnc" id="L33" title="All 2 branches missed.">) {</span>
    // TODO: is this necessary?
//    if (uiData.expectedSet != null) {
//        Text(
//            &quot;${uiData.expectedSet.sets}x${uiData.expectedSet.minReps} - &quot; +
//                    &quot;${uiData.expectedSet.maxReps}&quot; +
//                    if (uiData.expectedSet.perceivedExertion &gt; 0 || uiData.expectedSet.rir &gt; 0)
//                        &quot;${uiData.expectedSet.perceivedExertion}PE, ${uiData.expectedSet.rir}RIR&quot;
//                    else &quot;&quot;,
//            modifier = Modifier.padding(4.dp),
//            style = MaterialTheme.typography.labelLarge
//        )
//    }

<span class="nc bnc" id="L47" title="All 4 branches missed.">    val isSingleSide = uiData.entry.sets.any { it.modifier == ExerciseSetModifier.SingleSide }</span>
<span class="nc bnc" id="L48" title="All 2 branches missed.">    if (isSingleSide) {</span>
<span class="nc" id="L49">        Surface(</span>
<span class="nc" id="L50">            modifier = Modifier.padding(bottom = 4.dp),</span>
<span class="nc" id="L51">            shape = SuggestionChipDefaults.shape,</span>
<span class="nc" id="L52">            tonalElevation = 4.dp</span>
<span class="nc" id="L53">        ) {</span>
<span class="nc bnc" id="L54" title="All 4 branches missed.">            Text(&quot;Single Arm/Leg&quot;, modifier = Modifier.padding(4.dp), style = MaterialTheme.typography.labelSmall)</span>
<span class="nc" id="L55">        }</span>
    }


<span class="nc" id="L59">    val items = uiData.entry.sets</span>
<span class="nc bnc" id="L60" title="All 4 branches missed.">        .filter { it.type == ExerciseSetType.Working }</span>
<span class="nc" id="L61">        .distinctBy { set -&gt;</span>
<span class="nc" id="L62">            &quot;${set.reps}${</span>
<span class="nc bnc" id="L63" title="All 2 branches missed.">                if (uiData.unit == WeightUnit.Pounds)</span>
<span class="nc" id="L64">                    set.weightInPounds else set.weightInKilograms</span>
            }&quot;
        }

<span class="nc" id="L68">    Column(</span>
<span class="nc" id="L69">        modifier = modifier.padding(bottom = 8.dp)</span>
    ) {
<span class="nc bnc" id="L71" title="All 4 branches missed.">        items.forEach { set -&gt;</span>
<span class="nc" id="L72">            Row(</span>
<span class="nc" id="L73">                modifier = Modifier.padding(start = 8.dp).width(240.dp)</span>
            ) {
<span class="nc bnc" id="L75" title="All 4 branches missed.">                Text(</span>
<span class="nc" id="L76">                    &quot;${</span>
<span class="nc" id="L77">                        uiData.entry.sets.count { counting -&gt;</span>
<span class="nc bnc" id="L78" title="All 6 branches missed.">                            counting.reps == set.reps &amp;&amp;</span>
<span class="nc bnc" id="L79" title="All 4 branches missed.">                                    (counting.weightInPounds == set.weightInPounds ||</span>
<span class="nc bnc" id="L80" title="All 4 branches missed.">                                            counting.weightInKilograms == set.weightInKilograms)</span>
                        }
<span class="nc" id="L82">                    }x${set.reps}&quot;,</span>
<span class="nc" id="L83">                    style = MaterialTheme.typography.bodyMedium,</span>
<span class="nc" id="L84">                    modifier = Modifier.weight(1f)</span>
                )

<span class="nc" id="L87">                Text(</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">                    if (uiData.unit == WeightUnit.Pounds) &quot;${set.weightInPounds.toCleanString()}lbs&quot; else</span>
<span class="nc" id="L89">                        &quot;${set.weightInKilograms.toCleanString()}kg&quot;,</span>
<span class="nc" id="L90">                    style = MaterialTheme.typography.bodyMedium,</span>
<span class="nc" id="L91">                    modifier = Modifier.weight(1f)</span>
                )


<span class="nc bnc" id="L95" title="All 2 branches missed.">                if (set.perceivedExertion &gt; 0) {</span>
<span class="nc" id="L96">                    Text(</span>
<span class="nc" id="L97">                        &quot;${set.perceivedExertion}PE&quot;,</span>
<span class="nc" id="L98">                        style = MaterialTheme.typography.bodyMedium,</span>
<span class="nc" id="L99">                        modifier = Modifier.weight(1f)</span>
                    )
<span class="nc" id="L101">                } else {</span>
<span class="nc" id="L102">                    Text(&quot;&quot;, modifier = Modifier.weight(1f))</span>
                }

<span class="nc bnc" id="L105" title="All 2 branches missed.">                if (set.repsInReserve &gt; 0) {</span>
<span class="nc" id="L106">                    Text(</span>
<span class="nc" id="L107">                        &quot;${set.repsInReserve}RIR&quot;,</span>
<span class="nc" id="L108">                        style = MaterialTheme.typography.bodyMedium,</span>
<span class="nc" id="L109">                        modifier = Modifier.weight(1f)</span>
                    )
<span class="nc" id="L111">                } else {</span>
<span class="nc" id="L112">                    Text(&quot;&quot;, modifier = Modifier.weight(1f))</span>
<span class="nc" id="L113">                }</span>
<span class="nc" id="L114">            }</span>
<span class="nc" id="L115">        }</span>
<span class="nc" id="L116">    }</span>
<span class="nc" id="L117">}</span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>