<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TimerNotificationManager.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">app</a> &gt; <a href="index.source.html" class="el_package">com.catscoffeeandkitchen.fitnessjournal.services</a> &gt; <span class="el_source">TimerNotificationManager.kt</span></div><h1>TimerNotificationManager.kt</h1><pre class="source lang-java linenums">package com.catscoffeeandkitchen.fitnessjournal.services

import android.app.Notification
import android.app.NotificationManager
import android.app.PendingIntent
import android.content.Context
import android.content.Intent
import android.provider.Settings.Global.getString
import androidx.core.app.NotificationCompat
import androidx.core.content.ContextCompat.getSystemService
import com.catscoffeeandkitchen.fitnessjournal.MainActivity
import com.catscoffeeandkitchen.fitnessjournal.R

<span class="nc" id="L14">class TimerNotificationManager {</span>
    companion object {
        const val notificationId = 1
    }

    fun createNotification(context: Context, seconds: Long, startingSeconds: Long): Notification {
<span class="nc" id="L20">        val notificationIntent = Intent(context, MainActivity::class.java)</span>
<span class="nc" id="L21">        val pendingIntent = PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_IMMUTABLE)</span>

<span class="nc" id="L23">        return NotificationCompat.Builder(context, TimerService.channelId)</span>
<span class="nc" id="L24">            .setContentTitle(context.getString(R.string.x_seconds_on_timer, seconds.toString()))</span>
<span class="nc" id="L25">            .setSmallIcon(R.drawable.fitness_center)</span>
<span class="nc" id="L26">            .setContentIntent(pendingIntent)</span>
<span class="nc bnc" id="L27" title="All 2 branches missed.">            .setSilent(seconds &gt; 0)</span>
<span class="nc" id="L28">            .setProgress(startingSeconds.toInt(), seconds.toInt(), false)</span>
<span class="nc" id="L29">            .setPriority(NotificationManager.IMPORTANCE_LOW)</span>
<span class="nc" id="L30">            .setCategory(Notification.CATEGORY_SERVICE)</span>
<span class="nc" id="L31">            .build()</span>
    }

    fun updateNotification(context: Context, seconds: Long, startingSeconds: Long) {
<span class="nc" id="L35">        val notification = createNotification(context, seconds, startingSeconds)</span>

<span class="nc bnc" id="L37" title="All 2 branches missed.">        val manager = context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager</span>
<span class="nc" id="L38">        manager.notify(TimerService.notificationId, notification)</span>
<span class="nc" id="L39">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>